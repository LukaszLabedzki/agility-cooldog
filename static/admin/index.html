<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Edition</title>

    <!-- the script for authentication using Netlify Identity -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

    <!-- Set Netlify CMS language -->
    <!-- <script  type="text/javascript">
      window.onload = function() {
        netlifyIdentity.setLocale('fr')
      }
    </script> -->

  </head>
  <body>
    <!-- the script that builds the page and powers Netlify CMS -->
    <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>

    <script>
      CMS.registerEditorComponent({
        id: 'iframe',
        label: 'Youtube iframe',
        fields: [{ name: 'id', label: 'Iframe URL', widget: 'string' }],
        pattern:
          /<div class="w-container"><iframe src="https:\/\/www\.youtube\.com\/embed\/([A-Za-z-_]+)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen><\/iframe><\/div>/g,
        fromBlock(match) {
          return {
            id: match[1],
          };
        },
        toBlock({ id }) {
          return `<div className="w-container"><iframe src="https://www.youtube.com/embed/${id}" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen></iframe></div>`;
        },
        toPreview({ id }) {
          return `<div className="w-container"><iframe src="https://www.youtube.com/embed/${id}" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen></iframe></div>`;
        },
      });
    </script>
  </body>
</html>
